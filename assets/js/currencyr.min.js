/*!
 * Currencyr 1.0 - jQuery currency converter plugin
 * http://adivalabs.com/jquery/currencyr
 * http://firmanw.github.com/jquery-currencyr
 *
 * Copyright 2012, Firman Wandayandi (adivalabs.com)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/MIT
 * http://opensource.org/licenses/GPL-2.0
 *
 * Includes accounting.js
 * http://josscrowcroft.github.com/accounting.js/
 * Copyright 2011, Joss Crowcroft
 *
 * Includes jQuery Cookie Plugin v1.3
 * https://github.com/carhartl/jquery-cookie
 * Copyright 2011, Klaus Hartl
 */
(function(b){b.currencyr=function(c,f,d){var e={currencies:c,base:f.toUpperCase(),rates:d};
b("body").data("currencyr_data",e);};var a=function(d,c){this.target=d;this.options=b.extend({},this.defaults,c);this.init();return this;};a.prototype={target:null,defaults:{root:"currencyr",numcodes:5,pad:20,currency:null,thousand:",",decimal:".",precision:2},data:{base:"",currencies:{},rates:{}},current:null,amount:0,classes:{container:"container","close-button":"close",converter:"converter",amount:"amount",code:"code",currency:"currency",codes:"codes",dropdown:"dropdown",target:"target"},elements:{},dimensions:{main:0,dropdown:0,total:0},direction:"bottom",init:function(){if(!this.prepare()){return;
}accounting.settings.currency=b.extend(accounting.settings.currency,{thousand:this.options.thousand,decimal:this.options.decimal,precision:this.options.precision});
this.build();this.setDimensions();this.setEvents();},prepare:function(){if(!b("body").data("currencyr_data")){return false;}this.data=b("body").data("currencyr_data");
return true;},cssClass:function(c){return this.options.root+"-"+(this.classes[c]||c);},build:function(){var d=this,c;if(b("#"+d.options.root).length>0){return;
}d.elements.root=b("<div />").attr("id",d.options.root).addClass("currencyr").hide();d.elements.root.appendTo("body");d.elements.container=b("<div />").addClass(d.cssClass("container"));
d.elements.container.appendTo(d.elements.root);d.elements.beak=b("<div />").addClass(d.cssClass("beak"));d.elements.beak.appendTo(d.elements.container);
d.elements["close-button"]=b("<div />").addClass(d.cssClass("close-button"));d.elements["close-button"].appendTo(d.elements.container);d.elements.converter=b("<div />").addClass(d.cssClass("converter"));
d.elements.converter.appendTo(d.elements.container);c=b('<div class="currencyr-converter-content" />');c.appendTo(d.elements.converter);d.elements.amount=b("<div />").addClass(d.cssClass("amount"));
d.elements.amount.appendTo(c);d.elements.code=b("<div />").addClass(d.cssClass("code"));d.elements.code.appendTo(c);d.elements["currency-toggle"]=b("<div />").addClass(d.cssClass("toggle"));
d.elements["currency-toggle"].appendTo(d.elements.code);d.elements.currency=b("<span />").addClass(d.cssClass("currency")).text(d.data.base);d.elements.currency.appendTo(d.elements.code);
d.elements.codes=b("<div />").addClass(d.cssClass("codes"));d.elements.codes.appendTo(d.elements.code);d.elements.dropdown=b("<div />").addClass(d.cssClass("dropdown"));
d.elements.dropdown.appendTo(d.elements.codes);d.elements["codes-list"]=b("<ul />");d.elements["codes-list"].appendTo(d.elements.dropdown);b.each(d.data.rates,function(f,e){d.elements["codes-list"].append("<li>"+f+"<span>"+d.data.currencies[f]+"</span></li>");
});d.elements.remember=b("<div />").addClass(d.cssClass("remember"));d.elements.remember.appendTo(d.elements.container);d.elements.remember.html('<label><input type="checkbox"> Remember</label>');
b('<div class="currencyr-enclosure-top" />').prependTo(d.elements.codes);b('<div class="currencyr-enclosure-bottom" />').prependTo(d.elements.codes);d.elements.root.hide();
},setDimensions:function(){var c=this,d=0;c.elements.root.css({visibility:"hidden",display:"block"});c.elements.codes.css({visibility:"hidden",display:"block"});
b("li",c.elements["codes-list"]).each(function(){d=Math.max(d,b(this).width());});c.elements.dropdown.css({height:b("li",c.elements["codes-list"]).first().outerHeight()*Math.min(b("li",c.elements["codes-list"]).length,c.options.numcodes)});
c.dimensions.main={width:c.elements.root.width(),height:c.elements.root.height()};c.dimensions.converter={width:c.elements.converter.width(),height:c.elements.converter.height()};
c.dimensions.currency={width:d+c.elements["currency-toggle"].width(),height:c.elements.currency.outerHeight()};c.dimensions.dropdown={width:c.elements.dropdown.width(),height:c.elements.dropdown.height()};
c.dimensions.dialog={width:c.elements.root.width(),height:(c.dimensions.main.height+c.dimensions.dropdown.height)};c.elements.currency.width(c.dimensions.currency.width);
c.elements["currency-toggle"].css({right:(c.elements["codes-list"].width()-d)/2});c.elements.amount.css({marginRight:c.dimensions.currency.width+(c.elements.currency.outerWidth()-c.dimensions.currency.width)});
b("li",c.elements["codes-list"]).width(c.dimensions.currency.width);c.elements.dropdown.css({width:c.elements["codes-list"].outerWidth()});c.elements.codes.css({visibility:"",display:"none"});
c.elements.root.css({visibility:"",display:"none"});},setEvents:function(){var c=this;b(c.target).click(function(){c.show(this);});b("html").add(c.elements["close-button"]).click(function(){c.close();
});b("#"+c.options.root).add(c.target).click(function(d){d.stopPropagation();});c.elements.code.mouseover(function(){c.elements.codes.hide();}).unbind("mouseover");
c.elements.currency.click(function(){c.dropdown();});b("li",c.elements.codes).click(function(){var d=b(this).clone();b("span",d).remove();c.exchange(d.text());
}).hover(function(){c.dropdownOver(this);},function(){c.dropdownOut(this);});b(window).bind("resize scroll",function(){if(c.current==null){return;}var h=c.current.offset(),d=c.current.height(),e=c.elements.beak.height()+2,g=(h.top-b(window).scrollTop())+d+e,f=g;
if(c.direction=="top"){g=(h.top-b(window).scrollTop())-c.dimensions.main.height-e;f=g;}c.elements.root.css({left:(h.left-b(window).scrollLeft())-Math.min(c.elements.beak.width(),c.current.outerWidth()/2),top:f});
});if(window.addEventListener){c.elements.dropdown[0].addEventListener("wheel",c.dropdownWheel,false);c.elements.dropdown[0].addEventListener("MozMousePixelScroll",c.dropdownWheel,false);
c.elements.dropdown[0].addEventListener("mousewheel",c.dropdownWheel,false);}b('input[type="checkbox"]',c.elements.remember).unbind().bind("click",function(){c.remember(b(this).attr("checked"),c.elements.currency.text());
});},show:function(h){var k=this,e=k.data.base,g=0,f=b(h).offset(),j=b(h).height(),d=k.viewport(),l=k.elements.beak.height()+2,c=(f.top-b(window).scrollTop())+j+l,i=c+k.options.pad;
k.current=b(h);if(c+k.dimensions.dialog.height>d.height){k.direction="top";}else{k.direction="bottom";}b("*").removeClass(k.cssClass("target"));b(h).addClass(k.cssClass("target"));
if(b.cookie("currencyr")!=null){e=b.cookie("currencyr");b('input[type="checkbox"]',k.elements.remember).attr("checked",true);}else{if(k.options.currency!=null){e=k.options.currency;
}}k.elements.currency.text(e);k.elements.code.removeClass(this.cssClass("dropped"));k.amount=accounting.unformat(b(h).text());g=e!=k.data.base?accounting.formatMoney(k.convert(e),""):k.amount;
k.elements.amount.text(g);k.elements.codes.show().hide();if(k.direction=="top"){c=f.top-b(window).scrollTop()-k.dimensions.main.height-l;i=c-k.options.pad;
k.elements.container.addClass(k.cssClass("direction-top"));k.elements.beak.css({top:"auto",bottom:k.elements.beak.height()*-1});k.elements.codes.css({height:0,top:0});
k.elements.dropdown.css({top:-1});}else{k.elements.container.removeClass(k.cssClass("direction-top"));k.elements.beak.css({top:k.elements.beak.height()*-1,bottom:"auto"});
k.elements.codes.css({top:k.dimensions.converter.height,height:"auto"});k.elements.dropdown.css({top:""});}k.elements.beak.css("left",Math.min(k.elements.beak.width(),b(h).outerWidth()/2));
k.elements.root.hide().css({opacity:0,left:(f.left-b(window).scrollLeft())-Math.min(k.elements.beak.width(),b(h).outerWidth()/2),top:i}).show().animate({top:c,opacity:1});
},close:function(){this.elements.root.fadeOut();b("*").removeClass(this.cssClass("target"));this.current=null;},dropdown:function(){var c=this;if(this.direction=="top"){if(this.elements.codes.css("display")=="none"){this.elements.codes.show().animate({top:c.dimensions.dropdown.height*-1,height:c.dimensions.dropdown.height});
}else{this.elements.codes.animate({top:0,height:0},function(){b(this).hide();c.elements["codes-list"].css("top",0);});}}else{if(this.elements.codes.css("display")=="none"){this.elements["codes-list"].css("top",0);
this.elements.codes.slideDown();}else{this.elements.codes.slideToggle();}}this.elements.code.toggleClass(this.cssClass("dropped"));},dropdownOver:function(c){this.elements.dropdown.width(this.elements["codes-list"].outerWidth()+b("span",c).outerWidth());
},dropdownOut:function(c){this.elements.dropdown.width(this.elements["codes-list"].outerWidth());},dropdownWheel:function(g){var g=g||window.event,h=g.wheelDelta?g.wheelDelta/120:-g.deltaY||-g.detail,c=b(this).data("scroll")||0,f=b("ul",this).height(),d=b(this).height();
c-=Math.ceil(h)*b("ul li",this).first().outerHeight();c=Math.min(f-d,Math.max(0,c));b(this).data("scroll",c);b("ul",this).css("top",-c);g=b.event.fix(g);
g.preventDefault();},exchange:function(e){if(this.elements.currency.text()==e){return;}var c=this,d=c.elements.currency.clone(),f;c.elements.currency.hide().text(e).css({opacity:0});
if(c.direction=="top"){c.elements.currency.after(d);d.animate({marginTop:-d.outerHeight(),opacity:0},"fast",function(){c.elements.currency.css({marginTop:-b(this).outerHeight()}).show().animate({marginTop:0,opacity:1},"fast",function(){d.remove();
b(this).css({marginTop:""});});});}else{c.elements.currency.before(d);d.animate({top:d.outerHeight(),opacity:0},"fast",function(){c.elements.currency.show().animate({top:-b(this).outerHeight(),opacity:1},"fast",function(){d.remove();
b(this).css({top:""});});});}f=c.elements.amount.clone();f.css({position:"relative"});c.elements.amount.hide().css({opacity:0});c.elements.amount.before(f);
f.animate({left:-f.outerWidth(),opacity:0},"fast",function(){b(this).remove();c.elements.amount.text(accounting.formatMoney(c.convert(e),"")).css({position:"relative",left:-c.elements.amount.outerWidth()}).show().animate({left:0,opacity:1},"fast");
});c.remember(b('input[type="checkbox"]',c.elements.remember).attr("checked"),e);},convert:function(c){return this.amount*this.data.rates[c];},remember:function(d,c){if(d){b.cookie("currencyr",c);
}else{b.removeCookie("currencyr");}},viewport:function(){return{width:window.innerWidth||document.documentElement.clientWidth,height:window.innerHeight||document.documentElement.clientHeight};
}};b.fn.currencyr=function(d){var c=b("body").data("currencyr")||{};if(c[d]){return c[d].apply(this,Array.prototype.slice.call(arguments,1));}else{if(typeof d==="object"||!d){if(!b("body").data("currencyr")){b("body").data("currencyr",new a(this,d));
}if(!b(this).data("currencyr")){b(this).data("currencyr",b("body").data("currencyr"));}return b("body").data("currencyr");}else{b.error("Method "+method+" does not exist on jQuery.Currencyr");
}}};})(jQuery);
/*!
 * accounting.js v0.3.2
 * Copyright 2011, Joss Crowcroft
 *
 * Freely distributable under the MIT license.
 * Portions of accounting.js are inspired or borrowed from underscore.js
 *
 * Full details and documentation:
 * http://josscrowcroft.github.com/accounting.js/
 */
(function(o,g){var n={};
n.version="0.3.2";n.settings={currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}};
var p=Array.prototype.map,j=Array.isArray,f=Object.prototype.toString;function c(r){return !!(r===""||(r&&r.charCodeAt&&r.substr));}function k(r){return j?j(r):f.call(r)==="[object Array]";
}function q(r){return r&&f.call(r)==="[object Object]";}function h(s,r){var t;s=s||{};r=r||{};for(t in r){if(r.hasOwnProperty(t)){if(s[t]==null){s[t]=r[t];
}}}return s;}function a(w,v,u){var t=[],s,r;if(!w){return t;}if(p&&w.map===p){return w.map(v,u);}for(s=0,r=w.length;s<r;s++){t[s]=v.call(u,w[s],s,w);}return t;
}function l(s,r){s=Math.round(Math.abs(s));return isNaN(s)?r:s;}function e(s){var r=n.settings.currency.format;if(typeof s==="function"){s=s();}if(c(s)&&s.match("%v")){return{pos:s,neg:s.replace("-","").replace("%v","-%v"),zero:s};
}else{if(!s||!s.pos||!s.pos.match("%v")){return(!c(r))?r:n.settings.currency.format={pos:r,neg:r.replace("%v","-%v"),zero:r};}}return s;}var i=n.unformat=n.parse=function(u,r){if(k(u)){return a(u,function(v){return i(v,r);
});}u=u||0;if(typeof u==="number"){return u;}r=r||n.settings.number.decimal;var t=new RegExp("[^0-9-"+r+"]",["g"]),s=parseFloat((""+u).replace(/\((.*)\)/,"-$1").replace(t,"").replace(r,"."));
return !isNaN(s)?s:0;};var b=n.toFixed=function(t,r){r=l(r,n.settings.number.precision);var s=Math.pow(10,r);return(Math.round(n.unformat(t)*s)/s).toFixed(r);
};var d=n.formatNumber=function(t,w,z,v){if(k(t)){return a(t,function(A){return d(A,w,z,v);});}t=i(t);var r=h((q(w)?w:{precision:w,thousand:z,decimal:v}),n.settings.number),x=l(r.precision),u=t<0?"-":"",s=parseInt(b(Math.abs(t||0),x),10)+"",y=s.length>3?s.length%3:0;
return u+(y?s.substr(0,y)+r.thousand:"")+s.substr(y).replace(/(\d{3})(?=\d)/g,"$1"+r.thousand)+(x?r.decimal+b(Math.abs(t),x).split(".")[1]:"");};var m=n.formatMoney=function(t,s,v,z,u,y){if(k(t)){return a(t,function(A){return m(A,s,v,z,u,y);
});}t=i(t);var r=h((q(s)?s:{symbol:s,precision:v,thousand:z,decimal:u,format:y}),n.settings.currency),x=e(r.format),w=t>0?x.pos:t<0?x.neg:x.zero;return w.replace("%s",r.symbol).replace("%v",d(Math.abs(t),l(r.precision),r.thousand,r.decimal));
};n.formatColumn=function(y,t,w,B,v,A){if(!y){return[];}var r=h((q(t)?t:{symbol:t,precision:w,thousand:B,decimal:v,format:A}),n.settings.currency),z=e(r.format),x=z.pos.indexOf("%s")<z.pos.indexOf("%v")?true:false,s=0,u=a(y,function(F,D){if(k(F)){return n.formatColumn(F,r);
}else{F=i(F);var C=F>0?z.pos:F<0?z.neg:z.zero,E=C.replace("%s",r.symbol).replace("%v",d(Math.abs(F),l(r.precision),r.thousand,r.decimal));if(E.length>s){s=E.length;
}return E;}});return a(u,function(D,C){if(c(D)&&D.length<s){return x?D.replace(r.symbol,r.symbol+(new Array(s-D.length+1).join(" "))):(new Array(s-D.length+1).join(" "))+D;
}return D;});};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=n;}exports.accounting=n;}else{if(typeof define==="function"&&define.amd){define([],function(){return n;
});}else{n.noConflict=(function(r){return function(){o.accounting=r;n.noConflict=g;return n;};})(o.accounting);o.accounting=n;}}}(this));
/*!
 * jQuery Cookie Plugin v1.3
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2011, Klaus Hartl
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 */
(function(f,b,g){var a=/\+/g;
function e(h){return h;}function c(h){return decodeURIComponent(h.replace(a," "));}var d=f.cookie=function(p,o,u){if(o!==g){u=f.extend({},d.defaults,u);
if(o===null){u.expires=-1;}if(typeof u.expires==="number"){var q=u.expires,s=u.expires=new Date();s.setDate(s.getDate()+q);}o=d.json?JSON.stringify(o):String(o);
return(b.cookie=[encodeURIComponent(p),"=",d.raw?o:encodeURIComponent(o),u.expires?"; expires="+u.expires.toUTCString():"",u.path?"; path="+u.path:"",u.domain?"; domain="+u.domain:"",u.secure?"; secure":""].join(""));
}var h=d.raw?e:c;var r=b.cookie.split("; ");for(var n=0,k=r.length;n<k;n++){var m=r[n].split("=");if(h(m.shift())===p){var j=h(m.join("="));return d.json?JSON.parse(j):j;
}}return null;};d.defaults={};f.removeCookie=function(i,h){if(f.cookie(i)!==null){f.cookie(i,null,h);return true;}return false;};})(jQuery,document);